import Header from '../../components/Header'; import Footer from '../../components/Footer'; import API from '../../lib/api'; import { useRouter } from 'next/router'; import { useEffect, useState } from 'react'; import { useCart } from '../../context/CartContext'; export default function ProductPage(){ const router = useRouter(); const { id } = router.query; const [p,setP] = useState(null); const { addToCart } = useCart(); useEffect(()=>{ if(!id) return; API.get('/products/'+id).then(r=> setP(r.data)).catch(()=> setP(null)) },[id]); if(!p) return (<div><Header /><main className="container px-6 py-8">Loading...</main><Footer /></div>); return (<div><Header /><main className="container px-6 py-8 grid md:grid-cols-2 gap-8"><img src={p.image||'/placeholder.jpg'} className="w-full h-96 object-cover rounded" alt={p.name} /><div><h1 className="text-2xl font-bold">{p.name}</h1><p className="text-gray-600 my-2">PKR {p.price}</p><p className="mb-4 text-gray-600">{p.description}</p><div className="flex gap-2"><button onClick={()=> addToCart(p,1)} className="px-4 py-2 bg-black text-white rounded">Add to Cart</button><a href={'https://wa.me/923254482164'} className="ml-3 inline-block px-4 py-2 border rounded">Order via WhatsApp</a></div></div></main><Footer /></div>); }
