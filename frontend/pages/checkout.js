import Header from '../components/Header'; import Footer from '../components/Footer'; import { useState } from 'react'; import { useCart } from '../context/CartContext'; import API from '../lib/api'; export default function Checkout(){ const { cart, clearCart } = useCart(); const [name,setName]=useState(''); const [phone,setPhone]=useState(''); const [address,setAddress]=useState(''); const [payment,setPayment]=useState('COD'); const submit = async (e)=>{ e.preventDefault(); try{ const res = await API.post('/orders',{ products: cart.map(i=>({ product: i.id, quantity: i.qty })), totalAmount: cart.reduce((s,i)=> s + (i.price||0)*i.qty,0), paymentMethod: payment, shippingAddress: address }); clearCart(); alert('Order placed! ID: ' + res.data._id); window.location.href = '/'; }catch(err){ alert('Order failed'); } }; return (<div><Header /><main className="container px-6 py-8"><h1 className="text-2xl font-bold mb-4">Checkout</h1><form onSubmit={submit} className="max-w-xl space-y-4"><input value={name} onChange={e=>setName(e.target.value)} required placeholder="Full name" className="w-full border p-2" /><input value={phone} onChange={e=>setPhone(e.target.value)} required placeholder="Phone" className="w-full border p-2" /><textarea value={address} onChange={e=>setAddress(e.target.value)} required placeholder="Shipping address" className="w-full border p-2" /><select value={payment} onChange={e=>setPayment(e.target.value)} className="w-full border p-2"><option>COD</option><option>Easypaisa</option><option>JazzCash</option><option>Bank</option><option>Card</option></select><button type="submit" className="px-4 py-2 bg-black text-white rounded">Place Order</button></form></main><Footer /></div>)} 
